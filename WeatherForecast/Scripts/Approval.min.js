function ApprovalAccountGridRowChanged(n){selectedKeys=null;selectedKeys=getSelectedRowKeys(n)}function btnAccountApproveClick(){selectedKeys==null?ShowPopupMessage("Please select an Account to Approve","Approve Account",1):(entity="Account",AjaxRequest("POST","api/APIApproval","Approve","",{Entity:"1",TenantId:tenantId,SelectedIds:selectedKeys,ApproveStatus:2},!1,OnSaveApprovalSuccess,AjaxRequestError))}function btnHouseholdApproveClick(){selectedKeys==null?ShowPopupMessage("Please select a Household to Approve","Approve Household",1):(entity="Household",AjaxRequest("POST","api/APIApproval","Approve","",{Entity:"2",TenantId:tenantId,SelectedIds:selectedKeys,ApproveStatus:2},!1,OnSaveApprovalSuccess,AjaxRequestError))}function btnAccountRejectClick(){selectedKeys==null?ShowPopupMessage("Please select an Account to Reject","Reject Account",1):(entity="Account",btnRejectClick(selectedKeys,entity))}function btnHouseholdRejectClick(){selectedKeys==null?ShowPopupMessage("Please select Household to reject","Reject Household",1):(entity="Household",btnRejectClick(selectedKeys,entity))}function OnRejectSuccess(n){var t,i;try{n!=null&&(msg=selectedKeys.toString().split(",").length==1?"Selected "+entity:"Selected "+selectedKeys.toString().split(",").length+" "+entity+"s",ShowPopupMessage(msg+" rejected successfully.","Reject "+entity),t=$("#DashAccountsGrid").dxDataGrid("instance"),t!=null&&t.refresh(),i=$("#DashHouseholdsGrid").dxDataGrid("instance"),i!=null&&i.refresh())}catch(r){HandleError(r)}}function OnSaveApprovalSuccess(n){var t,i;n&&(msg=selectedKeys.toString().split(",").length==1?"Selected "+entity:"Selected "+selectedKeys.toString().split(",").length+" "+entity+"s",ShowPopupMessage(msg+" approved successfully.","Approve "+entity),t=$("#DashAccountsGrid").dxDataGrid("instance"),t!=null&&t.refresh(),i=$("#DashHouseholdsGrid").dxDataGrid("instance"),i!=null&&i.refresh())}function ApprovalHouseholdGridRowChanged(n){selectedKeys=null;selectedKeys=getSelectedRowKeys(n)}function btnHHApproveClick(){selectedKeys==null?ShowPopupMessage("Please select a Household to Approve","Approve Household",1):(entity="Household",AjaxRequest("POST","api/APIApproval","Approve","",{Entity:"2",TenantId:tenantId,SelectedIds:selectedKeys,ApproveStatus:2},!1,OnSaveApprovalSuccess,AjaxRequestError))}function btnHHRejectClick(){selectedKeys==null?ShowPopupMessage("Please select a Household to Reject","Reject Account",1):btnRejectClick(selectedKeys,"Household")}function ApprovalAccountGridToolbarPreparing(n){var t,i,r;try{t=n.toolbarOptions.items;i={widget:"dxButton",options:{icon:"/Content/Images/reject.png",onClick:btnAccountRejectClick,hint:"Reject"},location:"after"};t!=null&&t.splice(0,0,"",i);r={widget:"dxButton",options:{icon:"/Content/Images/Approve-24.png",onClick:btnAccountApproveClick,hint:"Approve"},location:"after"};t!=null&&t.splice(0,0,"",r)}catch(u){HandleError(u)}}function ApprovalHouseholdGridToolbarPreparing(n){var t,i,r;try{t=n.toolbarOptions.items;i={widget:"dxButton",options:{icon:"/Content/Images/reject.png",onClick:btnHouseholdRejectClick,hint:"Reject"},location:"after"};t!=null&&t.splice(0,0,"",i);r={widget:"dxButton",options:{icon:"/Content/Images/Approve-24.png",onClick:btnHouseholdApproveClick,hint:"Approve"},location:"after"};t!=null&&t.splice(0,0,"",r)}catch(u){HandleError(u)}}function HouseholdsMarkForApproval_OnClick(n){window.location.href="/WSHousehold/Index?approvalStatus="+n}function AccountsMarkForApproval_OnClick(n){window.location.href="/WSAccountsCommon/Index?approvalStatus="+n}function btnMarkForApprovalClick(n,t){stringEntity=t;selectedAccKeys=n;AjaxRequest("POST","api/APIApproval","MarkForApproval","",{Entity:t=="Account"?"1":"2",SelectedIds:n,ApproveStatus:1},!1,OnMarkForApprovalSuccess,AjaxRequestError)}function OnMarkForApprovalSuccess(n){n&&(selectedAccKeys.toString().split(",").length==1?msg="Selected "+stringEntity:selectedAccKeys.toString().split(",").length>1&&(msg="Selected "+selectedAccKeys.toString().split(",").length+" "+stringEntity+"s"),ShowPopupMessage(msg+" mark for approval successfully.","Approve "+stringEntity,1),AccountGridInstance=$("#AccountGrid").dxDataGrid("instance"),(AccountGridInstance!=null||AccountGridInstance!=undefined)&&(AccountGridInstance.deselectRows(selectedAccKeys),AccountGridInstance.refresh()),HHGridInstance=$("#dvHouseholdGrid").dxDataGrid("instance"),(HHGridInstance!=null||HHGridInstance!=undefined)&&(HHGridInstance.deselectRows(selectedAccKeys),HHGridInstance.refresh()))}function btnApproveClick(n,t){stringEntity=t;AjaxRequest("POST","api/APIApproval","Approve","",{Entity:t=="Account"?"1":"2",SelectedIds:n,ApproveStatus:2},!1,OnSaveApproveSuccess,AjaxRequestError)}function OnSaveApproveSuccess(n){var t,i,r,u;n&&(selectedKeys.toString().split(",").length==1?msg="Selected "+stringEntity:selectedKeys.toString().split(",").length>1&&(msg="Selected "+selectedKeys.split(",").length+" "+stringEntity+"s"),ShowPopupMessage(msg+" approved successfully.","Approve "+stringEntity,1),t=$("#AccountGrid").dxDataGrid("instance"),t!=null&&t.refresh(),i=$("#dvHouseholdGrid").dxDataGrid("instance"),i!=null&&i.refresh(),r=$("#DashAccountsGrid").dxDataGrid("instance"),r!=null&&r.refresh(),u=$("#DashHouseholdsGrid").dxDataGrid("instance"),u!=null&&u.refresh())}function btnRejectClick(n,t){selectedIds=n;flag_screen=t;AjaxRequest("GET","Approval","RejectApprovalAccount","",{},!1,OnRejectSuccessTest,AjaxRequestError)}function OnRejectSuccessTest(n){try{n!=null&&$("#commonPopupContiner").html(n)}catch(t){HandleError(t)}}function RejectApprovalButton(){var n=$("#RejectComment").dxTextArea("instance").option("value");AjaxRequest("POST","api/APIApproval","Approve","",{Entity:flag_screen=="Account"?"1":"2",SelectedIds:selectedIds,ApproveStatus:3,Note:n},!1,OnSaveRejectSuccess,AjaxRequestError)}function CancelRejectButton(){$("#rejectApprovalPopup").dxPopup("instance").option("visible",!1)}function OnSaveRejectSuccess(n){var t,i,r,u;n&&($("#rejectApprovalPopup").dxPopup("instance").option("visible",!1),selectedIds.toString().split(",").length==1?msg="Selected "+flag_screen:selectedIds.toString().split(",").length>1&&(msg="Selected "+selectedIds.toString().split(",").length+" "+flag_screen+"s"),ShowPopupMessage(msg+" rejected successfully.","Reject "+flag_screen,1),t=$("#AccountGrid").dxDataGrid("instance"),t!=null&&t.refresh(),i=$("#dvHouseholdGrid").dxDataGrid("instance"),i!=null&&i.refresh(),r=$("#DashAccountsGrid").dxDataGrid("instance"),r!=null&&r.refresh(),u=$("#DashHouseholdsGrid").dxDataGrid("instance"),u!=null&&u.refresh())}function OnApproveStatusValueChanged(n){approvedStatusId=n.selectedItem.Value;setTimeout(function(){var t=$("#AccountGrid").dxDataGrid("instance"),n;t!=undefined&&(t.beginUpdate(),t.columnOption("ApprovalStateName","visible",!0),t.columnOption("Note","visible",!0),t.refresh(),t.endUpdate());n=$("#dvHouseholdGrid").dxDataGrid("instance");n!=null&&(n.beginUpdate(),n.columnOption("ApprovalStateName","visible",!0),n.columnOption("Note","visible",!0),n.refresh(),n.endUpdate())},500)}var selectedKeys,entity,tenantId,enitityId,selectedAccKeys,stringEntity,selectedIds,flag_screen,approvedStatusId=0;